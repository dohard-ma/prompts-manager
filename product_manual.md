# AI Creative Lab - 产品说明书 (Product Manual)

## 1. 产品定位

**AI Creative Lab (Nano Banana Pro 版)** 是一款专为设计师和 Prompt 工程师打造的高端生图实验室。它将“提示词迭代管理”与“工业级多图生图逻辑”深度融合，支持高精度、多参考图的 AI 创作流程。

---

## 2. 核心功能模块

### 2.1 提示词版本实验室 (Prompt Versioning)

- **多版本追踪**: 每一个项目都拥有一条完整的提示词进化时间轴。支持保存、命名及回溯历史版本。
- **智能 Header 交互**:
  - **快速切换**: 通过顶部导航栏（Logo 旁）即可即时预览不同版本的提示词效果。
  - **脱离感知**: 当用户手动修改输入框内容时，系统自动识别为“当前预览 (已修改)”状态，防止误操作覆盖历史版本。
  - **保存反馈**: “保存提示词”按钮具备物理触感级的视觉反馈，保存成功后会呈现绿色勾选态。

### 2.2 批量生图工作流 (Image Generation Flow)

- **等待生成队列**:
  - **多图聚合**: 支持 Ctrl+V 粘贴或拖拽上传多张参考图。
  - **上下文关联**: 任务发起时，队列中所有 Ready 状态的图片将作为单一请求的上下文发送给 AI。
- **生图结果网格**:
  - **卡片式管理**: 结果以精美的卡片网格展示，支持下载、重试及删除。
  - **溯源标记**: 每一张生成的图片都显著标示了所使用的 Prompt 版本号（如 V1, V2），方便对比效果。

### 2.3 项目管理 (Project Management)

- **侧边栏导航**: Google AI Studio 风格的左侧栏，支持多项目快速切换、新建及提示词预设。

---

## 3. 交互设计规范 (UX Design)

- **极简两栏布局**: 采用经典的“左侧导航 + 右侧创作”布局，确保用户注意力集中在提示词与画布上。
- **沉浸式 Header**: 将全局操作（版本切换、保存、生成按钮）上提至 Header，释放主体区域的垂向空间。
- **微交互反馈**:
  - **Ready 状态脉冲**: 待生成队列具备呼吸灯式动画，提示用户任务待处理。
  - **加载状态**: 生成过程中卡片带有 40% 透明度渐变及旋转加载器。

---

## 4. 技术方案架构 (Technical Architecture)

### 4.1 前端栈

- **框架**: Next.js (React) 14+
- **样式**: Tailwind CSS (自定义 HSL 色彩系统)
- **图标库**: 自研 `IconHelper` (基于 SVG Path 的高性能转换组件)

### 4.2 AI 模型集成 (Nano Banana Pro)

- **核心模型**: `gemini-3-pro-image-preview` (内部代号 Nano Banana Pro)。
- **多模态输入**: 采用 `[PromptText, Image1, Image2, ...]` 的 Parts 序列结构，支持复杂的图间逻辑。
- **高清输出**: 配置 `imageConfig: { imageSize: '1K' }` 实现高质量位图生成。

### 4.3 存储与稳定性方案

- **Google AI File API (核心升级)**:
  - **云端引用**: 图片上传后不再以 Base64 存在本地，而是通过官方 File API 存入云端，本地仅存储 `fileUri`。
  - **优势**: 彻底解决了浏览器 `LocalStorage` 的 5MB 限制，极大提升了加载速度和请求稳定性。
- **双重冗余机制**:
  - **本地兜底**: 在网络环境受限时，系统可自动回退至 Base64 (`inlineData`) 模式。
  - **自动淘汰**: 具备过期数据清理逻辑，优先保护提示词等核心配置。

### 4.4 渲染注水抑制 (Hydration Fix)

- 对 React 挂载过程进行了特殊处理，通过 `suppressHydrationWarning` 抑制了由于浏览器插件或翻译软件非法注入 HTML 属性导致的样式抖动或报错。

---

## 5. 快速上手

1. 在顶部 Header 输入您的 Gemini API Key。
2. 在左侧栏创建一个新的“AI 生图项”。
3. 在提示词区域输入指令，例如：`Applying [IMAGE_1] textures to [IMAGE_2] structures.`。
4. 将相关底图粘贴至“等待生成队列”。
5. 点击“立即生成”，在下方查看结果。
